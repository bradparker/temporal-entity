[
  {
    "Plan": {
      "Node Type": "Nested Loop",
      "Parallel Aware": false,
      "Async Capable": false,
      "Join Type": "Inner",
      "Startup Cost": 0.44,
      "Total Cost": 275898046.79,
      "Plan Rows": 420578,
      "Plan Width": 52,
      "Actual Startup Time": 162.936,
      "Actual Total Time": 1742757.919,
      "Actual Rows": 888,
      "Actual Loops": 1,
      "Output": ["b_age_attributes.value", "bs.id", "bs.created_at", "'2022-07-28 07:48:56.654513'::timestamp without time zone", "bs.id", "\"as\".id", "\"as\".created_at"],
      "Inner Unique": false,
      "Shared Hit Blocks": 3707088753,
      "Shared Read Blocks": 63742,
      "Shared Dirtied Blocks": 0,
      "Shared Written Blocks": 0,
      "Local Hit Blocks": 0,
      "Local Read Blocks": 0,
      "Local Dirtied Blocks": 0,
      "Local Written Blocks": 0,
      "Temp Read Blocks": 0,
      "Temp Written Blocks": 0,
      "Plans": [
        {
          "Node Type": "Nested Loop",
          "Parent Relationship": "Outer",
          "Parallel Aware": false,
          "Async Capable": false,
          "Join Type": "Left",
          "Startup Cost": 0.00,
          "Total Cost": 273373799.62,
          "Plan Rows": 20435,
          "Plan Width": 32,
          "Actual Startup Time": 162.608,
          "Actual Total Time": 1280547.197,
          "Actual Rows": 1003,
          "Actual Loops": 1,
          "Output": ["bs.id", "bs.created_at", "\"as\".id", "\"as\".created_at"],
          "Inner Unique": true,
          "Join Filter": "(\"as\".id = as_bs.left_id)",
          "Rows Removed by Join Filter": 479511,
          "Shared Hit Blocks": 3694700931,
          "Shared Read Blocks": 28978,
          "Shared Dirtied Blocks": 0,
          "Shared Written Blocks": 0,
          "Local Hit Blocks": 0,
          "Local Read Blocks": 0,
          "Local Dirtied Blocks": 0,
          "Local Written Blocks": 0,
          "Temp Read Blocks": 0,
          "Temp Written Blocks": 0,
          "Plans": [
            {
              "Node Type": "Nested Loop",
              "Parent Relationship": "Outer",
              "Parallel Aware": false,
              "Async Capable": false,
              "Join Type": "Left",
              "Startup Cost": 0.00,
              "Total Cost": 273087488.94,
              "Plan Rows": 20435,
              "Plan Width": 24,
              "Actual Startup Time": 162.538,
              "Actual Total Time": 1270612.156,
              "Actual Rows": 1003,
              "Actual Loops": 1,
              "Output": ["bs.id", "bs.created_at", "as_bs.left_id"],
              "Inner Unique": false,
              "Join Filter": "(as_bs.right_id = bs.id)",
              "Rows Removed by Join Filter": 1005006,
              "Shared Hit Blocks": 3694700925,
              "Shared Read Blocks": 28978,
              "Shared Dirtied Blocks": 0,
              "Shared Written Blocks": 0,
              "Local Hit Blocks": 0,
              "Local Read Blocks": 0,
              "Local Dirtied Blocks": 0,
              "Local Written Blocks": 0,
              "Temp Read Blocks": 0,
              "Temp Written Blocks": 0,
              "Plans": [
                {
                  "Node Type": "Seq Scan",
                  "Parent Relationship": "Outer",
                  "Parallel Aware": false,
                  "Async Capable": false,
                  "Relation Name": "bs",
                  "Schema": "public",
                  "Alias": "bs",
                  "Startup Cost": 0.00,
                  "Total Cost": 16.03,
                  "Plan Rows": 1003,
                  "Plan Width": 16,
                  "Actual Startup Time": 0.021,
                  "Actual Total Time": 12.866,
                  "Actual Rows": 1003,
                  "Actual Loops": 1,
                  "Output": ["bs.id", "bs.created_at"],
                  "Shared Hit Blocks": 3,
                  "Shared Read Blocks": 3,
                  "Shared Dirtied Blocks": 0,
                  "Shared Written Blocks": 0,
                  "Local Hit Blocks": 0,
                  "Local Read Blocks": 0,
                  "Local Dirtied Blocks": 0,
                  "Local Written Blocks": 0,
                  "Temp Read Blocks": 0,
                  "Temp Written Blocks": 0
                },
                {
                  "Node Type": "Materialize",
                  "Parent Relationship": "Inner",
                  "Parallel Aware": false,
                  "Async Capable": false,
                  "Startup Cost": 0.00,
                  "Total Cost": 272780079.43,
                  "Plan Rows": 20435,
                  "Plan Width": 16,
                  "Actual Startup Time": 0.172,
                  "Actual Total Time": 1256.410,
                  "Actual Rows": 1003,
                  "Actual Loops": 1003,
                  "Output": ["as_bs.right_id", "as_bs.left_id"],
                  "Shared Hit Blocks": 3694700922,
                  "Shared Read Blocks": 28975,
                  "Shared Dirtied Blocks": 0,
                  "Shared Written Blocks": 0,
                  "Local Hit Blocks": 0,
                  "Local Read Blocks": 0,
                  "Local Dirtied Blocks": 0,
                  "Local Written Blocks": 0,
                  "Temp Read Blocks": 0,
                  "Temp Written Blocks": 0,
                  "Plans": [
                    {
                      "Node Type": "Seq Scan",
                      "Parent Relationship": "Outer",
                      "Parallel Aware": false,
                      "Async Capable": false,
                      "Relation Name": "as_bs",
                      "Schema": "public",
                      "Alias": "as_bs",
                      "Startup Cost": 0.00,
                      "Total Cost": 272779977.25,
                      "Plan Rows": 20435,
                      "Plan Width": 16,
                      "Actual Startup Time": 162.310,
                      "Actual Total Time": 1249799.765,
                      "Actual Rows": 1003,
                      "Actual Loops": 1,
                      "Output": ["as_bs.right_id", "as_bs.left_id"],
                      "Filter": "(as_bs.valid_at = (SubPlan 2))",
                      "Rows Removed by Filter": 4085903,
                      "Shared Hit Blocks": 3694700922,
                      "Shared Read Blocks": 28975,
                      "Shared Dirtied Blocks": 0,
                      "Shared Written Blocks": 0,
                      "Local Hit Blocks": 0,
                      "Local Read Blocks": 0,
                      "Local Dirtied Blocks": 0,
                      "Local Written Blocks": 0,
                      "Temp Read Blocks": 0,
                      "Temp Written Blocks": 0,
                      "Plans": [
                        {
                          "Node Type": "Result",
                          "Parent Relationship": "SubPlan",
                          "Subplan Name": "SubPlan 2",
                          "Parallel Aware": false,
                          "Async Capable": false,
                          "Startup Cost": 66.71,
                          "Total Cost": 66.72,
                          "Plan Rows": 1,
                          "Plan Width": 8,
                          "Actual Startup Time": 0.274,
                          "Actual Total Time": 0.284,
                          "Actual Rows": 1,
                          "Actual Loops": 4086906,
                          "Output": ["$1"],
                          "Shared Hit Blocks": 3694699818,
                          "Shared Read Blocks": 28,
                          "Shared Dirtied Blocks": 0,
                          "Shared Written Blocks": 0,
                          "Local Hit Blocks": 0,
                          "Local Read Blocks": 0,
                          "Local Dirtied Blocks": 0,
                          "Local Written Blocks": 0,
                          "Temp Read Blocks": 0,
                          "Temp Written Blocks": 0,
                          "Plans": [
                            {
                              "Node Type": "Limit",
                              "Parent Relationship": "InitPlan",
                              "Subplan Name": "InitPlan 1 (returns $1)",
                              "Parallel Aware": false,
                              "Async Capable": false,
                              "Startup Cost": 0.43,
                              "Total Cost": 66.71,
                              "Plan Rows": 1,
                              "Plan Width": 8,
                              "Actual Startup Time": 0.233,
                              "Actual Total Time": 0.243,
                              "Actual Rows": 1,
                              "Actual Loops": 4086906,
                              "Output": ["sub.valid_at"],
                              "Shared Hit Blocks": 3694699818,
                              "Shared Read Blocks": 28,
                              "Shared Dirtied Blocks": 0,
                              "Shared Written Blocks": 0,
                              "Local Hit Blocks": 0,
                              "Local Read Blocks": 0,
                              "Local Dirtied Blocks": 0,
                              "Local Written Blocks": 0,
                              "Temp Read Blocks": 0,
                              "Temp Written Blocks": 0,
                              "Plans": [
                                {
                                  "Node Type": "Index Scan",
                                  "Parent Relationship": "Outer",
                                  "Parallel Aware": false,
                                  "Async Capable": false,
                                  "Scan Direction": "Backward",
                                  "Index Name": "index_as_bs_on_valid_at",
                                  "Relation Name": "as_bs",
                                  "Schema": "public",
                                  "Alias": "sub",
                                  "Startup Cost": 0.43,
                                  "Total Cost": 270905.26,
                                  "Plan Rows": 4087,
                                  "Plan Width": 8,
                                  "Actual Startup Time": 0.212,
                                  "Actual Total Time": 0.212,
                                  "Actual Rows": 1,
                                  "Actual Loops": 4086906,
                                  "Output": ["sub.valid_at"],
                                  "Index Cond": "((sub.valid_at IS NOT NULL) AND (sub.valid_at <= '2022-07-28 07:48:56.654513'::timestamp without time zone))",
                                  "Rows Removed by Index Recheck": 0,
                                  "Filter": "(sub.right_id = as_bs.right_id)",
                                  "Rows Removed by Filter": 1007,
                                  "Shared Hit Blocks": 3694699818,
                                  "Shared Read Blocks": 28,
                                  "Shared Dirtied Blocks": 0,
                                  "Shared Written Blocks": 0,
                                  "Local Hit Blocks": 0,
                                  "Local Read Blocks": 0,
                                  "Local Dirtied Blocks": 0,
                                  "Local Written Blocks": 0,
                                  "Temp Read Blocks": 0,
                                  "Temp Written Blocks": 0
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "Node Type": "Materialize",
              "Parent Relationship": "Inner",
              "Parallel Aware": false,
              "Async Capable": false,
              "Startup Cost": 0.00,
              "Total Cost": 20.02,
              "Plan Rows": 935,
              "Plan Width": 16,
              "Actual Startup Time": 0.011,
              "Actual Total Time": 4.953,
              "Actual Rows": 479,
              "Actual Loops": 1003,
              "Output": ["\"as\".id", "\"as\".created_at"],
              "Shared Hit Blocks": 6,
              "Shared Read Blocks": 0,
              "Shared Dirtied Blocks": 0,
              "Shared Written Blocks": 0,
              "Local Hit Blocks": 0,
              "Local Read Blocks": 0,
              "Local Dirtied Blocks": 0,
              "Local Written Blocks": 0,
              "Temp Read Blocks": 0,
              "Temp Written Blocks": 0,
              "Plans": [
                {
                  "Node Type": "Seq Scan",
                  "Parent Relationship": "Outer",
                  "Parallel Aware": false,
                  "Async Capable": false,
                  "Relation Name": "as",
                  "Schema": "public",
                  "Alias": "as",
                  "Startup Cost": 0.00,
                  "Total Cost": 15.35,
                  "Plan Rows": 935,
                  "Plan Width": 16,
                  "Actual Startup Time": 0.019,
                  "Actual Total Time": 9.918,
                  "Actual Rows": 1003,
                  "Actual Loops": 1,
                  "Output": ["\"as\".id", "\"as\".created_at"],
                  "Shared Hit Blocks": 6,
                  "Shared Read Blocks": 0,
                  "Shared Dirtied Blocks": 0,
                  "Shared Written Blocks": 0,
                  "Local Hit Blocks": 0,
                  "Local Read Blocks": 0,
                  "Local Dirtied Blocks": 0,
                  "Local Written Blocks": 0,
                  "Temp Read Blocks": 0,
                  "Temp Written Blocks": 0
                }
              ]
            }
          ]
        },
        {
          "Node Type": "Memoize",
          "Parent Relationship": "Inner",
          "Parallel Aware": false,
          "Async Capable": false,
          "Startup Cost": 0.44,
          "Total Cost": 2507.96,
          "Plan Rows": 24,
          "Plan Width": 12,
          "Actual Startup Time": 227.368,
          "Actual Total Time": 460.786,
          "Actual Rows": 1,
          "Actual Loops": 1003,
          "Output": ["b_age_attributes.value", "b_age_attributes.entity_id"],
          "Cache Key": "bs.id",
          "Cache Mode": "logical",
          "Cache Hits": 0,
          "Cache Misses": 1003,
          "Cache Evictions": 0,
          "Cache Overflows": 0,
          "Peak Memory Usage": 113,
          "Shared Hit Blocks": 12387822,
          "Shared Read Blocks": 34764,
          "Shared Dirtied Blocks": 0,
          "Shared Written Blocks": 0,
          "Local Hit Blocks": 0,
          "Local Read Blocks": 0,
          "Local Dirtied Blocks": 0,
          "Local Written Blocks": 0,
          "Temp Read Blocks": 0,
          "Temp Written Blocks": 0,
          "Plans": [
            {
              "Node Type": "Index Scan",
              "Parent Relationship": "Outer",
              "Parallel Aware": false,
              "Async Capable": false,
              "Scan Direction": "Forward",
              "Index Name": "index_b_age_attributes_on_entity_id",
              "Relation Name": "b_age_attributes",
              "Schema": "public",
              "Alias": "b_age_attributes",
              "Startup Cost": 0.43,
              "Total Cost": 2507.95,
              "Plan Rows": 24,
              "Plan Width": 12,
              "Actual Startup Time": 227.340,
              "Actual Total Time": 460.739,
              "Actual Rows": 1,
              "Actual Loops": 1003,
              "Output": ["b_age_attributes.value", "b_age_attributes.entity_id"],
              "Index Cond": "(b_age_attributes.entity_id = bs.id)",
              "Rows Removed by Index Recheck": 0,
              "Filter": "(b_age_attributes.valid_at = (SubPlan 4))",
              "Rows Removed by Filter": 4115,
              "Shared Hit Blocks": 12387822,
              "Shared Read Blocks": 34764,
              "Shared Dirtied Blocks": 0,
              "Shared Written Blocks": 0,
              "Local Hit Blocks": 0,
              "Local Read Blocks": 0,
              "Local Dirtied Blocks": 0,
              "Local Written Blocks": 0,
              "Temp Read Blocks": 0,
              "Temp Written Blocks": 0,
              "Plans": [
                {
                  "Node Type": "Result",
                  "Parent Relationship": "SubPlan",
                  "Subplan Name": "SubPlan 4",
                  "Parallel Aware": false,
                  "Async Capable": false,
                  "Startup Cost": 0.47,
                  "Total Cost": 0.48,
                  "Plan Rows": 1,
                  "Plan Width": 8,
                  "Actual Startup Time": 0.080,
                  "Actual Total Time": 0.090,
                  "Actual Rows": 1,
                  "Actual Loops": 4128505,
                  "Output": ["$3"],
                  "Shared Hit Blocks": 12384737,
                  "Shared Read Blocks": 779,
                  "Shared Dirtied Blocks": 0,
                  "Shared Written Blocks": 0,
                  "Local Hit Blocks": 0,
                  "Local Read Blocks": 0,
                  "Local Dirtied Blocks": 0,
                  "Local Written Blocks": 0,
                  "Temp Read Blocks": 0,
                  "Temp Written Blocks": 0,
                  "Plans": [
                    {
                      "Node Type": "Limit",
                      "Parent Relationship": "InitPlan",
                      "Subplan Name": "InitPlan 3 (returns $3)",
                      "Parallel Aware": false,
                      "Async Capable": false,
                      "Startup Cost": 0.43,
                      "Total Cost": 0.47,
                      "Plan Rows": 1,
                      "Plan Width": 8,
                      "Actual Startup Time": 0.038,
                      "Actual Total Time": 0.048,
                      "Actual Rows": 1,
                      "Actual Loops": 4128505,
                      "Output": ["sub_1.valid_at"],
                      "Shared Hit Blocks": 12384737,
                      "Shared Read Blocks": 779,
                      "Shared Dirtied Blocks": 0,
                      "Shared Written Blocks": 0,
                      "Local Hit Blocks": 0,
                      "Local Read Blocks": 0,
                      "Local Dirtied Blocks": 0,
                      "Local Written Blocks": 0,
                      "Temp Read Blocks": 0,
                      "Temp Written Blocks": 0,
                      "Plans": [
                        {
                          "Node Type": "Index Only Scan",
                          "Parent Relationship": "Outer",
                          "Parallel Aware": false,
                          "Async Capable": false,
                          "Scan Direction": "Backward",
                          "Index Name": "index_b_age_attributes_on_entity_id_and_valid_at",
                          "Relation Name": "b_age_attributes",
                          "Schema": "public",
                          "Alias": "sub_1",
                          "Startup Cost": 0.43,
                          "Total Cost": 207.94,
                          "Plan Rows": 4778,
                          "Plan Width": 8,
                          "Actual Startup Time": 0.017,
                          "Actual Total Time": 0.017,
                          "Actual Rows": 1,
                          "Actual Loops": 4128505,
                          "Output": ["sub_1.valid_at"],
                          "Index Cond": "((sub_1.entity_id = b_age_attributes.entity_id) AND (sub_1.valid_at IS NOT NULL) AND (sub_1.valid_at <= '2022-07-28 07:48:56.654513'::timestamp without time zone))",
                          "Rows Removed by Index Recheck": 0,
                          "Heap Fetches": 0,
                          "Shared Hit Blocks": 12384737,
                          "Shared Read Blocks": 779,
                          "Shared Dirtied Blocks": 0,
                          "Shared Written Blocks": 0,
                          "Local Hit Blocks": 0,
                          "Local Read Blocks": 0,
                          "Local Dirtied Blocks": 0,
                          "Local Written Blocks": 0,
                          "Temp Read Blocks": 0,
                          "Temp Written Blocks": 0
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "Planning": {
      "Shared Hit Blocks": 364,
      "Shared Read Blocks": 42,
      "Shared Dirtied Blocks": 0,
      "Shared Written Blocks": 0,
      "Local Hit Blocks": 0,
      "Local Read Blocks": 0,
      "Local Dirtied Blocks": 0,
      "Local Written Blocks": 0,
      "Temp Read Blocks": 0,
      "Temp Written Blocks": 0
    },
    "Planning Time": 3.606,
    "Triggers": [
    ],
    "JIT": {
      "Functions": 43,
      "Options": {
        "Inlining": true,
        "Optimization": true,
        "Expressions": true,
        "Deforming": true
      },
      "Timing": {
        "Generation": 2.978,
        "Inlining": 49.277,
        "Optimization": 69.675,
        "Emission": 42.909,
        "Total": 164.839
      }
    },
    "Execution Time": 1742830.643
  }
]
